<slews-anyopsos-lib-ext-weavescope [nodes]="setNodeGraphNodes()" (selectedNode)="selectedNodeChange($event)" [simpleLayout]="true">

  <div class="alerts">
    <div class="mt-3 alert alert-danger" role="alert">Some alert text</div>
  </div>

  <div class="col text-center" style="
    position: absolute;
    bottom: 35px;
    z-index: 1;">
    <button class="btn" type="button" mat-flat-button color="primary" (click)="scrollTo()">Node info</button>
  </div>

</slews-anyopsos-lib-ext-weavescope>

<div class="h-100" #scrollToElement>
  <div class="info-top">
    <mat-form-field *ngIf="nmObject.info.data.metadata?.creationTimestamp">
      <input matInput placeholder="Creation time" value="{{nmObject.info.data.metadata.creationTimestamp | date:'medium'}}" disabled>
    </mat-form-field>

    <mat-form-field *ngIf="nmObject.info.data.metadata?.creationTimestamp">
      <!-- TODO -->
      <input matInput placeholder="Age" value="{{nmObject.info.data.metadata.creationTimestamp}}" disabled>
    </mat-form-field>

    <mat-form-field *ngIf="nmObject.info.data.metadata">
      <input matInput placeholder="UID" value="{{nmObject.info.data.metadata.uid}}" disabled>
    </mat-form-field>

    <div class="clearfix"></div>

    <ng-container *ngIf="nmObject.info.data.spec?.selector?.matchLabels">
      <mat-label>Selectors</mat-label>
      <saim-chips [map]="nmObject.info.data.spec.selector.matchLabels"></saim-chips>
    </ng-container>

    <ng-container *ngIf="nmObject.info.data.spec?.template?.spec?.containers">
      <mat-label>Images</mat-label>
      <saim-chips [map]="nmObject.info.data.spec.template.spec.containers"></saim-chips>
    </ng-container>

    <div class="clearfix"></div>

    <!-- Pod Status -->
    <ng-container *ngIf="nmObject.type === 'DaemonSet' || nmObject.type === 'Deployment' || nmObject.type === 'ReplicaSet' || nmObject.type === 'StatefulSet'">
      <h5 class="mt-3">Pod status</h5>

      <!-- DaemonSet -->
      <ng-container *ngIf="nmObject.type === 'DaemonSet'">
        <mat-form-field *ngIf="nmObject.info.data.status?.currentNumberScheduled">
          <input matInput placeholder="Running" value="{{nmObject.info.data.status.currentNumberScheduled}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.desiredNumberScheduled">
          <input matInput placeholder="Desired" value="{{nmObject.info.data.status.desiredNumberScheduled}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.numberReady">
          <input matInput placeholder="Ready" value="{{nmObject.info.data.status.numberReady}}" disabled>
        </mat-form-field>
      </ng-container>

      <!-- Deployment -->
      <ng-container *ngIf="nmObject.type === 'Deployment'">
        <mat-form-field *ngIf="nmObject.info.data.status?.updatedReplicas">
          <input matInput placeholder="Updated" value="{{nmObject.info.data.status.updatedReplicas}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.replicas">
          <input matInput placeholder="Total" value="{{nmObject.info.data.status.replicas}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.availableReplicas">
          <input matInput placeholder="Available" value="{{nmObject.info.data.status.availableReplicas}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.unavailableReplicas">
          <input matInput placeholder="Unavailable" value="{{nmObject.info.data.status.unavailableReplicas}}" disabled>
        </mat-form-field>
      </ng-container>

      <!-- ReplicaSet & StatefulSet-->
      <ng-container *ngIf="nmObject.type === 'ReplicaSet' || nmObject.type === 'StatefulSet'">
        <mat-form-field *ngIf="nmObject.info.data.status?.readyReplicas">
          <input matInput placeholder="Running" value="{{nmObject.info.data.status.readyReplicas}}" disabled>
        </mat-form-field>

        <mat-form-field *ngIf="nmObject.info.data.status?.replicas">
          <input matInput placeholder="Desired" value="{{nmObject.info.data.status.replicas}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="!nmObject.info.data.status?.replicas">
          <input matInput placeholder="Desired" value="0" disabled>
        </mat-form-field>

        <mat-form-field *ngIf="!nmObject.info.data.status?.readyReplicas && nmObject.info.data.status?.replicas">
          <input matInput placeholder="Pending" value="{{nmObject.info.data.status.replicas}}" disabled>
        </mat-form-field>
        <mat-form-field *ngIf="nmObject.info.data.status?.readyReplicas && nmObject.info.data.status?.replicas && (nmObject.info.data.status.readyReplicas - nmObject.info.data.status.replicas !== 0)">
          <input matInput placeholder="Pending" value="{{nmObject.info.data.status.readyReplicas - nmObject.info.data.status.replicas}}" disabled>
        </mat-form-field>
      </ng-container>

      <div class="clearfix"></div>
    </ng-container>

    <ng-container *ngIf="nmObject.info.data.metadata?.labels">
      <mat-label>Labels</mat-label>
      <saim-chips [map]="nmObject.info.data.metadata.labels"></saim-chips>
    </ng-container>

    <ng-container *ngIf="nmObject.info.data.metadata?.annotations">
      <mat-label>Annotations</mat-label>
      <saim-chips [map]="nmObject.info.data.metadata.annotations"></saim-chips>
    </ng-container>
  </div>

  <div class="info-bottom">

    <!--<mat-chip-list aria-label="Tag selection">
      <mat-chip color="accent">No tags</mat-chip>
      <mat-chip *ngFor="let tag of tags" selected removable (removed)="remove(tag)" color="primary">{{tag.category}}: {{tag.name}}<mat-icon matChipRemove>cancel</mat-icon></mat-chip>
      <mat-chip color="accent"><mat-icon>add</mat-icon></mat-chip>
    </mat-chip-list>-->
  </div>

</div>
