<div class="window__body" [ngClass]="{'with_status': application.status, 'with_actions': application.actions}">
  <div class="window__side">
    <ul class="side__list">
      <li><a><i class="fa fa-home"></i> Home</a></li>
      <li class="side__list--open">
        <a>
          <i class="fa fa-star"></i> Favorites
          <span class="list__toggle" (click)="toggleList($event)"></span>
        </a>
        <ul class="side__list">
          <li (click)="goToPath('/root/Desktop/')"><a><i class="fa fa-desktop"></i> Desktop</a></li>
          <li (click)="goToPath('/root/Downloads/')"><a><i class="fa fa-cloud-download"></i> Downloads</a></li>
        </ul>
      </li>
      <li class="side__list--open">
        <a>
          <i class="fa fa-server"></i> This Device
          <span class="list__toggle" (click)="toggleList($event)"></span>
        </a>
        <ul class="side__list">
          <li (click)="goToPath('/root/Desktop/')"><a><i class="fa fa-desktop"></i> Desktop</a></li>
          <li (click)="goToPath('/root/Documents/')"><a><i class="fa fa-files-o"></i> Documents</a></li>
          <li (click)="goToPath('/root/Downloads/')"><a><i class="fa fa-cloud-download"></i> Downloads</a></li>
        </ul>
      </li>
    </ul>
  </div>
  <div class="window__main row no_padding">
    <div class="col folders__body">

      <safe-actions-body [application]="application"></safe-actions-body>

      <div id="local_body" class="folders" #selectableContainer cdkDropList (cdkDropListDropped)="UIonDropItem($event)" (click)="handleBodyClick($event)" tabindex="0" (keydown)="handleItemKeyPress($event)" (contextmenu)="onBodyContextMenu($event)">

        <ngfUploadStatus
          [(percent)] = "progress"
          [httpEvent] = "httpEvent"
        ></ngfUploadStatus>
        <div class="dropzone" ngfDrop selectable="1" multiple="1"
             [(files)]="files"
             (filesChange)="uploadFiles($event)"
        >
          Drop files here (from local system) or click to upload.
        </div>

        <ng-container *ngIf="viewAsList === false">
          <slf-sysos-libs-file *ngFor="let file of currentData | filterBy: search; index as $index" cdkDrag cdkDragBoundary=".desktop" [cdkDragData]="file" (cdkDragStarted)="onDragStart()" [application]="application" [viewAsList]="viewAsList" [selectable]=Selectable [file]=file [isCurrentActive]="$index === currentActive" [currentPath]="currentPath" [selector]="'.window--file-explorer .window__main'" (click)="setCurrentActive($index)"></slf-sysos-libs-file>
        </ng-container>

        <ng-container *ngIf="viewAsList === true">
          <table class="table table-hover">
            <thead>
            <tr>
              <th>Name</th>
              <th>Size</th>
              <th>Type</th>
            </tr>
            </thead>
            <tbody>

            <slf-sysos-libs-file *ngFor="let file of currentData | filterBy: search; index as $index" cdkDrag cdkDragBoundary=".desktop" [cdkDragData]="file" (cdkDragStarted)="onDragStart()" [application]="application" [viewAsList]="viewAsList" [selectable]=Selectable [file]=file [isCurrentActive]="$index === currentActive" [currentPath]="currentPath" [selector]="'.window--file-explorer .window__main'" (click)="setCurrentActive($index)"></slf-sysos-libs-file>

            </tbody>
          </table>
        </ng-container>

        <div style="position: fixed"
             [style.left]="contextMenuPosition.x"
             [style.top]="contextMenuPosition.y"
             [matMenuTriggerFor]="contextMenuBody">
        </div>

        <mat-menu #contextMenuBody="matMenu">
          <ng-template matMenuContent>
            <ng-container *ngFor="let item of bodyContextMenuItems">
              <button mat-menu-item *ngIf="item.text !== 'divider'" (click)="item.action()" [disabled]="checkIfDisabled(item)" [innerHTML]="contextToText(item)"></button>
              <mat-divider *ngIf="item.text === 'divider'"></mat-divider>
            </ng-container>
          </ng-template>
        </mat-menu>

      </div>
    </div>
  </div>
</div>
